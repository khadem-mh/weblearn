{"version":3,"file":"static/js/130.8b6170aa.chunk.js","mappings":"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","sources":["Pages/MyAccount/Pages/Tickets/Tickets.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './Tickets.css'\r\nimport { Link } from 'react-router-dom';\r\n//components\r\nimport HeaderList from '../../Components/HeaderList/HeaderList';\r\nimport ItemList from '../../Components/ItemList/ItemList';\r\n//Icons\r\nimport { HiOutlineTicket } from \"react-icons/hi2\";\r\nimport { HiOutlineMailOpen } from \"react-icons/hi\";\r\nimport { TfiComments } from \"react-icons/tfi\";\r\nimport { BsPlusCircle } from \"react-icons/bs\";\r\nimport StatusBoxAccount from '../../Components/StatusBoxAccount/StatusBoxAccount'\r\n//Funcs\r\nimport Swal from \"sweetalert2\"\r\n\r\nexport default function Tickets() {\r\n\r\n  const [tickets, setTickets] = useState([])\r\n  const [ticketsOpen, setTicketsOpen] = useState(null)\r\n  const [ticketsClose, setTicketsClose] = useState(null)\r\n\r\n  useEffect(() => {\r\n\r\n    fetch(`http://localhost:4000/v1/tickets/user`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${JSON.parse(localStorage.getItem('user')).token}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(datas => {\r\n        console.log(datas);\r\n        setTickets(datas)\r\n      })\r\n\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (tickets.length) {\r\n      let achieveCountTicketsOpen = (tickets.map((item, index) => {\r\n        if (item.answer === 0) return index + 1\r\n      })).splice(-1)\r\n\r\n      let achieveCountTicketsClose = (tickets.map((item, index) => {\r\n        if (item.answer === 1) return index + 1\r\n      })).splice(-1)\r\n\r\n      if (achieveCountTicketsOpen !== undefined) {\r\n        setTicketsOpen(achieveCountTicketsOpen)\r\n      }\r\n\r\n      if (achieveCountTicketsClose !== undefined) {\r\n        setTicketsClose(achieveCountTicketsClose)\r\n      }\r\n    }\r\n  }, [tickets])\r\n\r\n  const handleTicketShow = ticket => {\r\n\r\n    fetch(`http://localhost:4000/v1/tickets/answer/${ticket._id}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        'Authorization': `Bearer ${JSON.parse(localStorage.getItem('user')).token}`,\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(datas => {\r\n        Swal.fire({\r\n          icon: 'info',\r\n          html: `\r\n          <div style=\"text-align: start\">\r\n            <h2 style=\"font-weight: bold; color: skyblue; padding-bottom: 1rem\">╩╦ تیکت ارسال شده </h2>\r\n            <div class=\"border p-3 rounded-4\">\r\n              <h2 style=\"font-weight: bold; color: greenyellow; padding-bottom: 1rem\">_موضوع تیکت</h2>\r\n              ${ticket.title}\r\n              <br/>\r\n              <br/>\r\n              <h2 style=\"font-weight: bold; color: greenyellow; padding-bottom: 1rem\">_متن تیکت</h2>\r\n              <p>${ticket.body}</p>\r\n            </div>\r\n            <br/>\r\n            <br/>\r\n            <h2 style=\"font-weight: bold; color: skyblue; padding-bottom: 1rem\">╩╦ پاسخ </h2>\r\n            <p class=\"text-info\">${ticket.answer === 0 ? 'هنوز پاسخی داده نشده است' : datas.answer}</p>\r\n          </div>\r\n          `,\r\n          background: '#28293D',\r\n          color: 'whitesmoke',\r\n          confirmButtonText: 'دیدم'\r\n        });\r\n      })\r\n\r\n  }\r\n\r\n  return (\r\n    <div className='account-page-my-courses'>\r\n\r\n      <section className='statusbox-page-tickets'>\r\n        <div className='account-page-first__header'>\r\n          <StatusBoxAccount bgColorBox={'rgba(255, 225, 0, .9)'} logo={<HiOutlineTicket />} title={'همه تیکت ها'} subTitle={` ${tickets.length} دوره`} />\r\n          <StatusBoxAccount bgColorBox={'rgba(78, 129, 251, .9)'} logo={< HiOutlineMailOpen />} title={'تیکت های باز'} subTitle={`${ticketsOpen && ticketsOpen[0] !== undefined ? ticketsOpen : \"0\"} دوره`} />\r\n          <StatusBoxAccount bgColorBox={'rgba(46, 213, 115, .9)'} logo={<TfiComments />} title={'بسته شده'} subTitle={`${ticketsClose && ticketsClose[0] !== undefined ? ticketsClose : \"0\"} دوره`} />\r\n        </div>\r\n\r\n        <div className='statusbox-page-tickets__left' >\r\n          <Link to={'/my-account/add-ticket'}> <StatusBoxAccount bgColorBox={'#4E81FB'} logo={<BsPlusCircle />} subTitle={'تیکت جدید'} /></Link>\r\n        </div>\r\n      </section>\r\n\r\n      <div className='content-left__bottom'>\r\n        <div className='content-left__header'>\r\n          <HeaderList title={'تیکت ها'} linkActive={false} />\r\n        </div>\r\n\r\n        <ul className='content-left__list'>\r\n          {\r\n            tickets.map((ticket, index) => (\r\n              <li className='li-item' style={{ cursor: 'pointer' }} key={index} onClick={() => handleTicketShow(ticket)}>\r\n                <ItemList urlDest={'/'} textStatus={ticket.answer === 1 ? false : true} titleTicket={ticket.title} date3Section={ticket.createdAt.slice(0, 10)} statusQues={ticket.departmentID} />\r\n              </li>\r\n            ))\r\n          }\r\n        </ul>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n"],"names":["Tickets","tickets","setTickets","useState","ticketsOpen","setTicketsOpen","ticketsClose","setTicketsClose","useEffect","fetch","method","headers","concat","JSON","parse","localStorage","getItem","token","then","res","json","datas","console","log","length","achieveCountTicketsOpen","map","item","index","answer","splice","achieveCountTicketsClose","undefined","_jsxs","className","children","_jsx","StatusBoxAccount","bgColorBox","logo","HiOutlineTicket","title","subTitle","HiOutlineMailOpen","TfiComments","Link","to","BsPlusCircle","HeaderList","linkActive","ticket","style","cursor","onClick","_id","Swal","icon","html","body","background","color","confirmButtonText","handleTicketShow","ItemList","urlDest","textStatus","titleTicket","date3Section","createdAt","slice","statusQues","departmentID"],"sourceRoot":""}