"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[82],{1432:(e,t,s)=>{s.d(t,{A:()=>c});s(5043);var n=s(579);function c(e){let{msg:t}=e;return(0,n.jsx)("div",{className:"parent-err-msg",children:(0,n.jsx)("h1",{className:"err-msg",children:t})})}},1073:(e,t,s)=>{s.d(t,{A:()=>n});const n=e=>{const t=t=>27===t.keyCode&&e();return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}},8692:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);var n=s(7950),c=s(579);function l(e){let{submitAction:t,cancleAction:s,title:l}=e;return n.createPortal((0,c.jsx)("div",{className:"modal-parent active",children:(0,c.jsxs)("div",{className:"delete-modal",children:[(0,c.jsx)("h1",{children:l}),(0,c.jsxs)("div",{className:"delete-modal-btns",children:[(0,c.jsx)("button",{className:"delete-btn delete-modal-accept-btn",onClick:e=>t(e),children:"\u0628\u0644\u0647"}),(0,c.jsx)("button",{className:"delete-btn delete-modal-reject-btn",onClick:()=>s(),children:"\u062e\u06cc\u0631"})]})]})}),document.getElementById("modals-parent"))}},8030:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(5043),c=s(7950),l=s(1073),o=s(579);function d(e){let{onHide:t,tHead:s,tdIntoTbody:d}=e;const[a]=(0,n.useState)(s),[r]=(0,n.useState)(d);return(0,n.useEffect)((()=>{(0,l.A)(t)})),(0,n.useEffect)((()=>{let e=0,s=0;const n=n=>{e+=n.x,s+=n.y,e===n.x&&s===n.y||t()};return window.addEventListener("click",n),()=>window.removeEventListener("click",n)})),c.createPortal((0,o.jsx)("div",{className:"modal-parent active",children:(0,o.jsx)("div",{className:"details-modal",children:(0,o.jsxs)("table",{className:"cms-table",children:[(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:a&&a.map(((e,t)=>(0,o.jsx)("th",{children:e},t)))})}),(0,o.jsx)("tbody",{children:(0,o.jsx)("tr",{children:r&&r.map(((e,t)=>(0,o.jsx)("td",{children:e},t)))})})]})})}),document.getElementById("modals-parent"))}},4082:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s(5043),c=s(1432),l=s(8030),o=s(8692);const d=(0,n.createContext)();const a=(e,t)=>{fetch("http://localhost:8000/api/orders").then((e=>e.json())).then((s=>{e(s);let n=0,c=(new Date).toLocaleDateString();s.map((e=>{e.isActive&&function(e){const t="\u06f0\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9";let s="",n="";for(let c=0;c<e.length;c++){let l=e[c];n=-1===t.indexOf(l)?s+=e[c]:s+=t.indexOf(l)}return n}(c).slice(0,7).trim()===e.date.slice(0,7).trim()&&(e.off>0?n+=(e.price-e.price*e.off/100)*e.count:n+=e.price*e.count,t(n))}))}))};var r=s(579);function i(){const[e,t]=(0,n.useContext)(d),[s,i]=(0,n.useState)([]),[h,u]=(0,n.useState)(!1),[x,j]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!1),[v,y]=(0,n.useState)(0),[k,A]=(0,n.useState)(0),[N,S]=(0,n.useState)(0),[C,g]=(0,n.useState)(0),[w,E]=(0,n.useState)({}),[I,T]=(0,n.useState)(null),[D,L]=(0,n.useState)(null);(0,n.useEffect)((()=>{a(i,t)}),[]);const H=(e,s)=>{fetch("http://localhost:8000/api/orders/active-order/".concat(I,"/").concat(v),{method:"PUT"}).then((n=>{if(n.ok){const n=e;fetch("http://localhost:8000/api/orders/sale/".concat(I),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sale:s,saleCount:n})}).then((e=>{e.ok&&(a(i,t),fetch("http://localhost:8000/api/products/productSale/".concat(D),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:s,sale:n})}).then((e=>e.json())))}))}}))},P=e=>{e(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:s.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"products-title",children:"\u0633\u0641\u0627\u0631\u0634\u0627\u062a"}),(0,r.jsx)("div",{className:"parent-table table-users",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"\u0646\u0627\u0645 \u0645\u062d\u0635\u0648\u0644"}),(0,r.jsx)("th",{scope:"col",children:"\u0646\u0627\u0645 \u0645\u0634\u062a\u0631\u06cc"}),(0,r.jsx)("th",{scope:"col",children:"\u062a\u0627\u0631\u06cc\u062e"}),(0,r.jsx)("th",{scope:"col",children:"\u0633\u0627\u0639\u062a"}),(0,r.jsx)("th",{scope:"col",children:"\u062a\u0639\u062f\u0627\u062f \u0633\u0641\u0627\u0631\u0634"}),(0,r.jsx)("th",{scope:"col",children:"\u062a\u062e\u0641\u06cc\u0641"}),(0,r.jsx)("th",{scope:"col",children:"\u0642\u06cc\u0645\u062a \u062a\u062e\u0641\u06cc\u0641 \u062e\u0648\u0631\u062f\u0647"}),(0,r.jsx)("th",{scope:"col",children:"\u06a9\u0646\u062a\u0631\u0644"})]})}),(0,r.jsx)("tbody",{children:s.map((e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.productID}),(0,r.jsx)("td",{children:e.userID}),(0,r.jsx)("td",{children:e.date}),(0,r.jsx)("td",{children:e.hour}),(0,r.jsxs)("td",{children:[e.count," \u0639\u062f\u062f"]}),(0,r.jsxs)("td",{children:[e.off," %"]}),(0,r.jsx)("td",{children:0===e.off?"\u062a\u062e\u06cc\u0641 \u0646\u062f\u0627\u0631\u062f":e.price-e.price*e.off/100}),(0,r.jsxs)("td",{children:[(0,r.jsx)("button",{className:"products-table-btn",onClick:()=>{T(e.id),m(!0)},children:"\u062d\u0630\u0641"}),(0,r.jsx)("button",{className:"products-table-btn",onClick:()=>{u(!0),E(e)},children:"\u062c\u0632\u0626\u06cc\u0627\u062a"}),1===e.isActive?(0,r.jsx)("button",{className:"products-table-btn",onClick:()=>{b(!0),T(e.id),L(e.productID),y(0),A(e.sale),S(e.saleCount),g(e.count)},children:"\u0631\u062f \u0633\u0641\u0627\u0631\u0634"}):(0,r.jsx)("button",{className:"products-table-btn",onClick:()=>{b(!0),T(e.id),L(e.productID),y(1),A(e.sale),S(e.saleCount),g(e.count)},children:"\u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634"})]})]},e.id)))})]})})]}):(0,r.jsx)(c.A,{msg:"\u0647\u06cc\u0686 \u0633\u0641\u0627\u0631\u0634\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})}),x&&(0,r.jsx)(l.A,{onHide:()=>j(!1),tdIntoTbody:["\u062e\u0637\u0627 : \u0627\u06cc\u0646 \u0645\u062d\u0635\u0648\u0644 \u062f\u0631 \u0627\u0646\u0628\u0627\u0631 \u0645\u0648\u062c\u0648\u062f \u0646\u0645\u06cc \u0628\u0627\u0634\u062f \u0645\u0648\u062c\u0648\u062f\u06cc \u0627\u0646\u0628\u0627\u0631 \u0647\u0633\u062a : ".concat(k)]}),h&&(0,r.jsx)(l.A,{onHide:()=>u(!1),tHead:["\u0645\u0648\u062c\u0648\u062f\u06cc","\u0645\u062d\u0628\u0648\u0628\u06cc\u062a","\u0642\u06cc\u0645\u062a","\u0641\u0631\u0648\u0634 \u0631\u0641\u062a\u0647"],tdIntoTbody:[w.sale,w.popularity,w.price,w.saleCount]}),p&&(0,r.jsx)(o.A,{cancleAction:()=>P(m),submitAction:()=>{fetch("http://localhost:8000/api/orders/".concat(I),{method:"DELETE"}).then((e=>{e.ok&&(m(!1),a(i,t))}))},title:"\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u06a9\u0627\u0631\u0628\u0631 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f"}),f&&(0,r.jsx)(o.A,{cancleAction:()=>P(b),submitAction:e=>{if(e.preventDefault(),k>0)if(C>k)j(!0);else if(0===v){const e=k+C;A(e);H(N-C,e)}else{const e=k-C;A(e);H(N+C,e)}else j(!0);b(!1)},title:"\u0622\u06cc\u0627 \u0627\u0632 \u062a\u0627\u06cc\u06cc\u062f \u06cc\u0627 \u0631\u062f \u0633\u0641\u0627\u0631\u0634 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f"})]})}}}]);
//# sourceMappingURL=82.b6d84918.chunk.js.map