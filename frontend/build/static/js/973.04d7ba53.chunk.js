"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[973],{1432:(e,t,s)=>{s.d(t,{A:()=>c});s(5043);var n=s(579);function c(e){let{msg:t}=e;return(0,n.jsx)("div",{className:"parent-err-msg",children:(0,n.jsx)("h1",{className:"err-msg",children:t})})}},1073:(e,t,s)=>{s.d(t,{A:()=>n});const n=e=>{const t=t=>27===t.keyCode&&e();return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}},8030:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(5043),c=s(7950),l=s(1073),r=s(579);function d(e){let{onHide:t,tHead:s,tdIntoTbody:d}=e;const[o]=(0,n.useState)(s),[i]=(0,n.useState)(d);return(0,n.useEffect)((()=>{(0,l.A)(t)})),(0,n.useEffect)((()=>{let e=0,s=0;const n=n=>{e+=n.x,s+=n.y,e===n.x&&s===n.y||t()};return window.addEventListener("click",n),()=>window.removeEventListener("click",n)})),c.createPortal((0,r.jsx)("div",{className:"modal-parent active",children:(0,r.jsx)("div",{className:"details-modal",children:(0,r.jsxs)("table",{className:"cms-table",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:o&&o.map(((e,t)=>(0,r.jsx)("th",{children:e},t)))})}),(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:i&&i.map(((e,t)=>(0,r.jsx)("td",{children:e},t)))})})]})})}),document.getElementById("modals-parent"))}},5061:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(5043),c=s(7950),l=s(1073),r=s(579);function d(e){let{children:t,onClose:s,onSubmit:d,title:o,btnIsActive:i=!0}=e;return(0,n.useEffect)((()=>{(0,l.A)(s)})),c.createPortal((0,r.jsx)("div",{className:"modal-parent active",children:(0,r.jsxs)("form",{className:"edit-modal-form",children:[(0,r.jsx)("h1",{children:o}),t,i&&(0,r.jsx)("button",{className:"edit-form-submit",onClick:d,children:"\u0627\u062f\u0627\u0645\u0647"})]})}),document.getElementById("modals-parent"))}},6973:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var n=s(5043),c=s(1432),l=s(8030),r=s(5061),d=s(3023),o=s.n(d),i=s(579);function a(){const[e,t]=(0,n.useState)([]),[s,d]=(0,n.useState)({ticketID:null,reply:""}),[a,h]=(0,n.useState)({isShow:!1,body:""});(0,n.useEffect)((()=>{u()}),[]);const u=()=>{fetch("http://localhost:4000/v1/tickets",{method:"GET",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((e=>e.json())).then((e=>{console.log(e),t(e)}))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{children:[e.length&&(0,i.jsx)("h1",{className:"products-title title-pr",children:"\u062a\u06cc\u06a9\u062a \u0647\u0627"}),(0,i.jsx)("div",{className:"parent-table",children:e.length?(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"\u0634\u0646\u0627\u0633\u0647"}),(0,i.jsx)("th",{scope:"col",children:"\u06a9\u0627\u0631\u0628\u0631"}),(0,i.jsx)("th",{scope:"col",children:"\u0645\u0648\u0636\u0648\u0639"}),(0,i.jsx)("th",{scope:"col",children:"\u0645\u062a\u0646 \u062a\u06cc\u06a9\u062a"}),(0,i.jsx)("th",{scope:"col",children:"\u0627\u0631\u062a\u0628\u0627\u0637 \u0628\u0627"}),(0,i.jsx)("th",{scope:"col",children:"\u062f\u0648\u0631\u0647"}),(0,i.jsx)("th",{scope:"col",children:"\u067e\u0627\u0633\u062e"}),(0,i.jsx)("th",{scope:"col",children:"\u062d\u0630\u0641"})]})}),(0,i.jsx)("tbody",{children:e&&e.map(((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:t+1}),(0,i.jsx)("td",{children:e.user}),(0,i.jsx)("td",{children:e.title}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"products-table-btn",onClick:()=>h({isShow:!0,body:e.body}),children:"\u0645\u0634\u0627\u0647\u062f\u0647 \u062a\u06cc\u06a9\u062a"})}),(0,i.jsx)("td",{className:"text-secondary",children:e.departmentSubID}),(0,i.jsx)("td",{children:e.course?e.course:"___"}),(0,i.jsx)("td",{children:1===e.answer?(0,i.jsx)("button",{className:"products-table-btn",disabled:!0,children:"\u067e\u0627\u0633\u062e \u062f\u0627\u062f\u0647 \u0634\u062f\u0647"}):(0,i.jsx)("button",{className:"products-table-btn",onClick:()=>d({ticketID:e._id}),children:"\u062b\u0628\u062a \u067e\u0627\u0633\u062e"})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"products-table-btn",children:"\u062d\u0630\u0641"})})]},t)))})]}):(0,i.jsx)(c.A,{msg:"\u0647\u06cc\u0686 \u062a\u06cc\u06a9\u062a\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})})]}),a.isShow&&(0,i.jsx)(l.A,{onHide:()=>h({isShow:!1,body:""}),tdIntoTbody:[a.body]}),s.ticketID&&(0,i.jsx)(r.A,{onClose:()=>d({ticketID:null,reply:""}),onSubmit:e=>(e=>{e.preventDefault(),fetch("http://localhost:4000/v1/tickets/answer",{method:"POST",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token),"Content-Type":"application/json"},body:JSON.stringify({body:s.reply,ticketID:s.ticketID})}).then((e=>e.json())).then((e=>{u(),d({ticketID:null,reply:""}),o()({title:"\u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u067e\u0627\u0633\u062e \u062f\u0627\u062f\u0647 \u0634\u062f",icon:"success",buttons:"\u0628\u0627\u0634\u0647"})}))})(e),title:"\u067e\u0627\u0633\u062e \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f",children:(0,i.jsx)("textarea",{value:s.reply,onChange:e=>d((t=>({...t,reply:e.target.value}))),children:"\u067e\u0627\u0633\u062e: "})})]})}}}]);
//# sourceMappingURL=973.04d7ba53.chunk.js.map