"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[735],{8735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(5043),n=a(3216),l=a(3023),c=a.n(l),o=a(579);function r(){const e=(0,n.Zp)(),[t,a]=(0,s.useState)([]),[l,r]=(0,s.useState)(null),[i,h]=(0,s.useState)([]),[d,u]=(0,s.useState)(""),[p,m]=(0,s.useState)([]),[j,g]=(0,s.useState)(""),[x,k]=(0,s.useState)(""),[v,f]=(0,s.useState)(null);(0,s.useEffect)((()=>{fetch("http://localhost:4000/v1/tickets/departments").then((e=>e.json())).then((e=>a(e)))}),[]),(0,s.useEffect)((()=>{l&&-1!==l&&fetch("http://localhost:4000/v1/tickets/departments-subs/".concat(l)).then((e=>e.json())).then((e=>h(e)))}),[l]);return(0,o.jsxs)("div",{className:"container-add-ticket",children:[(0,o.jsx)("h2",{className:"add-ticket__title",children:"\u0627\u0631\u0633\u0627\u0644 \u062a\u06cc\u06a9\u062a"}),(0,o.jsx)("hr",{}),(0,o.jsx)("p",{className:"lable-task",children:"\u062f\u067e\u0627\u0631\u062a\u0645\u0627\u0646"}),(0,o.jsxs)("select",{className:"add-ticket__department",onChange:e=>r(e.target.value),children:[(0,o.jsx)("option",{value:"-1",children:"\u062f\u067e\u0627\u0631\u062a\u0645\u0627\u0646 \u0645\u0648\u0631\u062f \u0646\u0638\u0631..."}),t&&t.length&&t.map(((e,t)=>{let{title:a,_id:s}=e;return(0,o.jsx)("option",{value:s,children:a},t)}))]}),(0,o.jsx)("p",{className:"lable-task",children:"\u0646\u0648\u0639 \u062a\u06cc\u06a9\u062a"}),(0,o.jsxs)("select",{className:"add-ticket__department",onChange:e=>{u(e.target.value),"63b688c5516a30a651e98156"===e.target.value&&fetch("http://localhost:4000/v1/users/courses",{method:"GET",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((e=>e.json())).then((e=>{console.log(e),m(e)}))},children:[(0,o.jsx)("option",{value:"-1",children:"\u0646\u0648\u0639 \u062a\u06cc\u06a9\u062a \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f..."}),i&&i.length&&i.map(((e,t)=>(0,o.jsx)("option",{value:e._id,children:e.title},t)))]}),"63b688c5516a30a651e98156"===d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"lable-task",children:"\u062f\u0648\u0631\u0647 \u0645\u062f\u0646\u0638\u0631"}),(0,o.jsxs)("select",{className:"add-ticket__department",onChange:e=>f(e.target.value),children:[(0,o.jsx)("option",{value:"-1",children:"\u062f\u0648\u0631\u0647 \u0645\u062f\u0646\u0638\u0631 \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f..."}),p&&p.length&&p.map(((e,t)=>(0,o.jsx)("option",{value:e.course._id,children:e.course.name},t)))]})]}),(0,o.jsxs)("form",{className:"add-ticket__form",children:[(0,o.jsx)("p",{className:"lable-task",children:"\u0645\u0648\u0636\u0648\u0639 \u062a\u06cc\u06a9\u062a"}),(0,o.jsx)("input",{type:"text",placeholder:"\u0645\u0648\u0636\u0648\u0639 \u062a\u06cc\u06a9\u062a \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",className:"add-ticket__title-input",onChange:e=>g(e.target.value)}),(0,o.jsx)("p",{className:"lable-task",children:"\u0645\u062a\u0646 \u062a\u06cc\u06a9\u062a"}),(0,o.jsx)("textarea",{cols:"30",rows:"8",className:"add-ticket__textarea",placeholder:"\u0645\u062a\u0646 \u062a\u06cc\u06a9\u062a \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",onChange:e=>k(e.target.value)}),(0,o.jsx)("button",{onClick:t=>(t=>{if(t.preventDefault(),l&&d&&j.length&&x.length){let t={departmentID:l,departmentSubID:d,title:j,priority:"1",body:x,course:v||void 0};fetch("http://localhost:4000/v1/tickets",{method:"POST",headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token),"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((t=>{c()({title:"\u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062a\u06cc\u06a9\u062a \u0627\u0631\u0633\u0627\u0644 \u0634\u062f",icon:"success",buttons:"\u0628\u0627\u0634\u0647"}).then((()=>{e("/my-account")})),console.log(t)}))}else c()({title:"\u0644\u0637\u0641\u0627 \u0645\u0642\u0627\u062f\u06cc\u0631 \u062e\u0648\u0627\u0633\u062a\u0647 \u0634\u062f\u0647 \u0631\u0627 \u067e\u0631 \u06a9\u0646\u06cc\u062f",icon:"warning",buttons:"\u0628\u0627\u0634\u0647"})})(t),children:"\u0627\u0631\u0633\u0627\u0644"})]})]})}}}]);
//# sourceMappingURL=735.0ff394e8.chunk.js.map