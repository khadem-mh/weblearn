{"version":3,"file":"static/js/735.0ff394e8.chunk.js","mappings":"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","sources":["Pages/MyAccount/Pages/AddTicket/AddTicket.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport './AddTicket.css'\r\nimport swal from 'sweetalert'\r\n\r\nexport default function AddTicket() {\r\n\r\n  const navigate = useNavigate()\r\n  const [departments, setDepartments] = useState([])\r\n  const [departmentID, setDepartmentID] = useState(null)\r\n  const [departmentsSubs, setDepartmentsSubs] = useState([])\r\n  const [departmentsSubID, setDepartmentsSubID] = useState(\"\")\r\n  const [usersCourses, setUsersCourses] = useState([])\r\n  const [title, setTitle] = useState(\"\")\r\n  const [body, setBody] = useState(\"\")\r\n  const [courseID, seCcourseID] = useState(null)\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:4000/v1/tickets/departments`)\r\n      .then(res => res.json())\r\n      .then(datas => setDepartments(datas))\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (departmentID && departmentID !== -1) {\r\n      fetch(`http://localhost:4000/v1/tickets/departments-subs/${departmentID}`)\r\n        .then(res => res.json())\r\n        .then(datas => setDepartmentsSubs(datas))\r\n    }\r\n  }, [departmentID])\r\n\r\n  const isTypeHasSupport = val => {\r\n    if (val === \"63b688c5516a30a651e98156\") {\r\n      fetch(`http://localhost:4000/v1/users/courses`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          'Authorization': `Bearer ${JSON.parse(localStorage.getItem('user')).token}`,\r\n        }\r\n      })\r\n        .then(res => res.json())\r\n        .then(datas => {\r\n          console.log(datas);\r\n          setUsersCourses(datas)\r\n        })\r\n    }\r\n  }\r\n\r\n  const sendNewTicket = e => {\r\n    e.preventDefault()\r\n\r\n    if (\r\n      departmentID\r\n      && departmentsSubID\r\n      && title.length\r\n      && body.length\r\n    ) {\r\n\r\n      let infosNewTicket = {\r\n        departmentID: departmentID,\r\n        departmentSubID: departmentsSubID,\r\n        title: title,\r\n        priority: '1',\r\n        body: body,\r\n        course: courseID ? courseID : undefined,//optional \r\n      }\r\n\r\n      fetch(`http://localhost:4000/v1/tickets`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Authorization': `Bearer ${JSON.parse(localStorage.getItem('user')).token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(infosNewTicket)\r\n      })\r\n        .then(res => res.json())\r\n        .then(datas => {\r\n          {\r\n            swal({\r\n              title: 'با موفقیت تیکت ارسال شد',\r\n              icon: 'success',\r\n              buttons: 'باشه'\r\n            }).then(() => {\r\n              navigate('/my-account')\r\n            })\r\n          }\r\n          console.log(datas);\r\n        })\r\n    }\r\n    else {\r\n      {\r\n        swal({\r\n          title: 'لطفا مقادیر خواسته شده را پر کنید',\r\n          icon: 'warning',\r\n          buttons: 'باشه'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='container-add-ticket'>\r\n      <h2 className='add-ticket__title'>ارسال تیکت</h2>\r\n      <hr />\r\n      <p className='lable-task'>دپارتمان</p>\r\n      <select className='add-ticket__department' onChange={e => setDepartmentID(e.target.value)}>\r\n        <option value=\"-1\">دپارتمان مورد نظر...</option>\r\n        {\r\n          departments && departments.length && departments.map(({ title, _id }, index) => (\r\n            <option value={_id} key={index}>{title}</option>\r\n          ))\r\n        }\r\n      </select>\r\n\r\n      <p className='lable-task'>نوع تیکت</p>\r\n      <select className='add-ticket__department' onChange={e => {\r\n        setDepartmentsSubID(e.target.value)\r\n        isTypeHasSupport(e.target.value)\r\n      }}>\r\n        <option value=\"-1\">نوع تیکت را انتخاب کنید...</option>\r\n        {\r\n          departmentsSubs && departmentsSubs.length && departmentsSubs.map((item, index) => (\r\n            <option value={item._id} key={index}>{item.title}</option>\r\n          ))\r\n        }\r\n      </select>\r\n      {\r\n        departmentsSubID === '63b688c5516a30a651e98156' &&\r\n        <>\r\n          <p className='lable-task'>دوره مدنظر</p>\r\n          <select className='add-ticket__department' onChange={e => seCcourseID(e.target.value)}>\r\n            <option value=\"-1\">دوره مدنظر را انتخاب کنید...</option>\r\n            {\r\n              usersCourses && usersCourses.length && usersCourses.map((item, index) => (\r\n                <option value={item.course._id} key={index}>{item.course.name}</option>\r\n              ))\r\n            }\r\n          </select>\r\n        </>\r\n      }\r\n\r\n      <form className='add-ticket__form'>\r\n        <p className='lable-task'>موضوع تیکت</p>\r\n        <input type=\"text\" placeholder='موضوع تیکت خود را وارد کنید' className='add-ticket__title-input' onChange={(e) => setTitle(e.target.value)} />\r\n        <p className='lable-task'>متن تیکت</p>\r\n        <textarea cols=\"30\" rows=\"8\" className='add-ticket__textarea' placeholder='متن تیکت خود را وارد کنید' onChange={(e) => setBody(e.target.value)}></textarea>\r\n        <button onClick={(e) => sendNewTicket(e)}>ارسال</button>\r\n      </form>\r\n\r\n    </div>\r\n  )\r\n}\r\n"],"names":["AddTicket","navigate","useNavigate","departments","setDepartments","useState","departmentID","setDepartmentID","departmentsSubs","setDepartmentsSubs","departmentsSubID","setDepartmentsSubID","usersCourses","setUsersCourses","title","setTitle","body","setBody","courseID","seCcourseID","useEffect","fetch","then","res","json","datas","concat","_jsxs","className","children","_jsx","onChange","e","target","value","length","map","_ref","index","_id","method","headers","JSON","parse","localStorage","getItem","token","console","log","item","_Fragment","course","name","type","placeholder","cols","rows","onClick","preventDefault","infosNewTicket","departmentSubID","priority","undefined","stringify","swal","icon","buttons","sendNewTicket"],"sourceRoot":""}